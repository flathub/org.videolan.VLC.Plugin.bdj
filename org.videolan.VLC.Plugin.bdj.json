{
  "id": "org.videolan.VLC.Plugin.bdj",
  "build-extension": true,
  "runtime": "org.videolan.VLC",
  "runtime-version": "stable",
  "branch": "3-22.08",
  "sdk": "org.freedesktop.Sdk//22.08",
  "sdk-extensions": ["org.freedesktop.Sdk.Extension.openjdk11"],
  "separate-locales": false,
 "appstream-compose": false,
  "build-options": {
    "env": {
      "V": "1",
      "JAVA_HOME": "/usr/lib/sdk/openjdk11"
    },
    "append-path": "/usr/lib/sdk/openjdk11/bin"
  },
  "modules": [
    {
      "name": "openjdk",
        "buildsystem": "simple",
        "build-commands": [
          "mkdir -p /app/share/vlc/extra/bdj/jre",
          "cp -r /usr/lib/sdk/openjdk11/jvm/openjdk-11/* /app/share/vlc/extra/bdj/jre",
          "rm -rf /app/share/vlc/extra/bdj/jre/lib/src.zip /app/share/vlc/extra/bdj/jre/lib/ct.sym",
          "rm -rf /app/share/vlc/extra/bdj/jre/include /app/share/vlc/extra/bdj/jre/demo /app/share/vlc/extra/bdj/jre/sample"
        ]
    },
    {
      "name": "ant",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p /app/share/vlc/extra/bdj/ant",
        "tar xf apache-ant-bin.tar.bz2 --strip-components=1 --directory=/app/share/vlc/extra/bdj/ant"
      ],
      "sources": [
        {
          "type": "file",
          "url": "http://apache.mirrors.ovh.net/ftp.apache.org/dist/ant/binaries/apache-ant-1.10.12-bin.tar.bz2",
          "dest-filename": "apache-ant-bin.tar.bz2",
          "sha256": "276ea73f267a5b1a58f02e2eb5ef594a9b2885e33afb05ef995251d4d18377a6"
        }
      ]
    },
    {
      "name": "libbluray",
      "config-opts": ["--enable-shared", "--disable-static", "--prefix=/app/share/vlc/extra/bdj"],
      "build-options": {
        "append-path": "/app/share/vlc/extra/bdj/ant/bin"
      },
      "sources": [
        {
          "type": "archive",
          "url": "http://ftp.videolan.org/videolan/libbluray/1.3.4/libbluray-1.3.4.tar.bz2",
          "sha256": "478ffd68a0f5dde8ef6ca989b7f035b5a0a22c599142e5cd3ff7b03bbebe5f2b"
        }
      ]
    },
    {
      "name": "envvars",
      "buildsystem": "simple",
      "build-commands": [
        "mv bdj-env.sh /app/share/vlc/extra/bdj",
        "rm -rf /app/share/vlc/extra/bdj/ant",
        "install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo org.videolan.VLC.Plugin.bdj.appdata.xml",
        "appstream-compose --basename=org.videolan.VLC.Plugin.bdj --prefix=${FLATPAK_DEST} --origin=flatpak org.videolan.VLC.Plugin.bdj"
      ],
      "sources": [
        {
          "type": "file",
          "path": "bdj-env.sh"
        },
        {
          "type": "file",
          "path": "org.videolan.VLC.Plugin.bdj.appdata.xml"
        }
      ]
    }
  ]
}
